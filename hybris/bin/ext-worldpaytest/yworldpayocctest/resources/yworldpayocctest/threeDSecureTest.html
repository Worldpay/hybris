<html>
<head>
    <title>3-D Secure helper page</title>
</head>
<body onload="submitForm()">
<form name="theForm" id="theForm" method="POST">
    <input type="hidden" name="PaReq" />
    <input type="hidden" name="TermUrl" />
    <input type="hidden" name="MD" />
</form>
<script type="text/javascript">
    function submitForm() {
        console.log("submitForm called")
        var formObject = document.forms['theForm']
        formObject.elements["PaReq"].value=getURLParameter("PaReq")
        formObject.elements["TermUrl"].value=getURLParameter("TermUrl")
        formObject.elements["MD"].value=getURLParameter("MD")
        formObject.action = getURLParameter("IssuerUrl")
        formObject.submit()
    }

    function getURLParameter(param) {
        console.log("getURLParameter called with: " + param)
        var pageURL = window.location.search.substring(1)
        var urlVariables = pageURL.split('&')
        for (var i = 0; i < urlVariables.length; i++) {
            var paramName = urlVariables[i].split('=')
            if (paramName[0] == param) {
                console.log("value: " + decodeURIComponent(paramName[1]))
                return decodeURIComponent(paramName[1])
            }
        }
    }
</script>
</body>
</html>